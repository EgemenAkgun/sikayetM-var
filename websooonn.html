<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <title>şikayetMİvar</title>
  <style>
    body{
      margin: 0; /* Sayfa kenar boşluğunu kaldırır */
      padding: 0; /* Sayfa içerisindeki boşluğu kaldırır */
      height: 100vh; /* Sayfanın yüksekliğini ekran yüksekliği kadar yapar */
            
            
      background-color: #f0f0f0;
            
            
      background: url('arka.jpeg') center/cover no-repeat fixed;

  }
    .footer {
        background-color: transparent;
        color: #fff;
        padding: 20px 0;
        text-align: center;
    }
    .navbar {
        background-color: #6c757d; 
    }
    .navbar a:hover
    {
      background-color:#add8e6;

    }
    #aaa{
      color: darkblue;
      font-weight: bolder;
      
    }
    #bb{
      font-weight: bolder;
      width:150px;
      background-color: lightsteelblue;
    }
    #cc{
      width:300px;
      background-color:lightsteelblue ;
      font-weight: bolder;
      
    }
    #dd{
      font-weight: bolder;
      width:150px;
      background-color:lightsteelblue ;
    }
    #ee{
      font-weight: bolder;
      background-color: lightsteelblue;
    }
    .navbar-brand, .nav-link {
        color: gray; 
    }
    .navbar a:hover{
    background-color:#add8e6;
    border-radius: 10px;
    }
    th{
      background-color: rgb(43, 186, 162);
     
    }
    td{
      background-color: mediumturquoise;
      
    }
    #k{
      color: darkblue;
      font-weight: bolder;
      
    }
    #klm{
      background-color: red;
      text-align: center;
    }
    #klm:hover{
      background-color: rgb(178, 30, 30);
      border-radius: 10px;
    }


    @media (min-width: 768px) {
      body {
        padding-top: 0;
      }
    }
  </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">
            <img src="logo.jpeg" height="70px" background-color:transparent alt="şikayetMİvar">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#">Önceki Şikayetler</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#a">Yeni Şikayet</a>
                </li>
            </ul>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <img src="profil.jpeg" alt="Profil Resmi" class="profile-image" id="profile" data-toggle="modal" data-target="#profileModal"> Profil
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="profileModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="profileModalLabel">Profil Bilgileri</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body" >
                <p><strong>Ad:</strong> Yasin Bera Şahin</p>
                <p><strong>E-posta:</strong> yasinberasahin@gmail.com</p>
                <p><strong>Adres:</strong> Göksu mah. 499/4 sok. no:34 D.6 BUCA/İZMİR</p>
                <p><strong>İletişim</strong> +90 555 555 5555</p>
                <a href="deneme.home.html" ><button id="klm">ÇIKIŞ YAP</button></a>
            </div>
          </div>
        </div>
      </div>

<div class="container mt-5">
  <h2 id="k"><b>Önceki Şikayetler</b></h2>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Şikayet Tarihi</th>
        <th scope="col">Şikayet Sahibi</th>
        <th scope="col">Şikayet Açıklaması</th>
        <th scope="col">Firma</th>
        <th scope="col">Şikayet Durumu</th>
        <th scope="col">İşlemler</th>
      </tr>
    </thead>
    <tbody id="complaintTableBody">
      <!-- Şikayetler buraya eklenecek -->
    </tbody>
  </table>

  <h2 class="mt-5" id="aaa" >Yeni Şikayet Girme</h2>
  <form id="complaintForm">
    <div id="dd" class="form-group">
      <label for="complaintDate">Şikayet Tarihi:</label>
      <input type="text" class="form-control" id="complaintDate"  disabled>
    </div>
    <div id="cc" class="form-group">
      <label for="complaintOwner">Şikayet Sahibi:</label>
      <input type="text" class="form-control" id="complaintOwner" required>
    </div>
    <div id="ee" class="form-group">
      <label for="complaintDescription">Şikayet Açıklaması:</label>
      <textarea class="form-control" id="complaintDescription" required></textarea>
    </div>
    <div id="bb" class="form-group">
      <label for="companySelect">Firma Seç:</label>
      <select class="form-control" id="companySelect" required>
        <option value="Trendyol">Trendyol</option>
        <option value="Nike">Nike</option>
        <option value="Burger King">Burger King</option>
        <option value="Şok">Şok</option>
        <option value="Ege Plastik">Ege Plastik</option>
        <option value="Bim">Bim</option>
      </select>
    </div>
    <button type="submit" class="btn btn-success btn-sm" id="a">Şikayet Gönder</button>
  </form>
</div>
<div class="footer">
  © 2023 ŞikayetMİvar. Tüm hakları saklıdır.
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
  
  // Sabit şikayet verileri
  const complaints = [
    { id:1 ,date: '2023-01-01', owner: 'Yasin Bera Şahin', description: 'Ürün arızalı', status: 'İnceleniyor', company: 'Burger King' },
    { id:2 ,date: '2023-02-02', owner: 'Egemen Akgün', description: 'Teslimat gecikti', status: 'Çözüldü', company: 'Bim' },
    { id:3 ,date: '2023-03-03', owner: 'Ayşen Altındiş', description: 'Teslimat gecikti', status: 'İnceleniyor', company: 'Şok' },
    { id:4 ,date: '2023-04-04', owner: 'Ahmet Taş', description: 'Ürün arızalı', status: 'Çözüldü', company: 'Bim' },
    { id:5 ,date: '2023-05-05', owner: 'Malik Duymaz', description: 'Teslimat gecikti', status: 'Çözüldü' , company: 'Trendyol'},
    {id:6 , date: '2023-06-06', owner: 'Mehmet Efe Gür', description: 'Teslimat gecikti', status: 'İnceleniyor' , company: 'Trendyol'},
    { id:7 ,date: '2023-07-07', owner: 'Demet Yazıcı', description: 'Ürün arızalı', status: 'Çözüldü', company: 'Nike' },
    { id:8 ,date: '2023-08-08', owner: 'Eda Güzel', description: 'Ürün arızalı', status: 'Çözüldü', company: 'Ege Plastik' },
    { id:9 ,date: '2023-09-09', owner: 'Yunus Aksoy', description: 'Teslimat gecikti', status: 'Çözüldü', company: 'Şok' },
    { id:10 ,date: '2023-10-10', owner: 'Atakan Arsız', description: 'Teslimat gecikti', status: 'İnceleniyor' , company: 'Bim'},
    
  ];
  
  // Sayfa yüklendiğinde mevcut şikayetleri tabloya ekle
  $(document).ready(function () {
    const tableBody = $('#complaintTableBody');
    complaints.forEach(complaint => {
      tableBody.append(`
        <tr data-id="${complaint.id}">
          <td>${complaint.date}</td>
          <td>${complaint.owner}</td>
          <td>${complaint.description}</td>
          <td>${complaint.company}</td>
          <td>${complaint.status}</td>
          <td>
            <button type="button" class="btn btn-danger btn-sm" onclick="deleteComplaint(${complaint.id})">Sil</button>
            <button href="#nn" type="button" class="btn btn-warning btn-sm" onclick="editComplaint(${complaint.id})">Düzenle</button>
          </td>
        </tr>
      `);
    });
  });
  
  

  // Şikayet silme fonksiyonu
  function deleteComplaint(id) {
    if (confirm('Şikayeti silmek istediğinizden emin misiniz?')) {
      $(`#complaintTableBody tr[data-id="${id}"]`).remove();
      alert('Şikayet başarıyla silindi.');
    }
  }

  // Şikayet düzenleme fonksiyonu
  function editComplaint(id) {
    const complaint = complaints.find(c => c.id === id);
    $('#complaintDate').val(complaint.date);
    $('#complaintOwner').val(complaint.owner);
    $('#complaintDescription').val(complaint.description);
    $('#companySelect').val(complaint.company);

    // Düzenleme modu için submit butonunu güncelle
    var editButton = $('#a');

      // Butonun rengini değiştirme ve tekrar eski haline getirme
      editButton.removeClass('btn-success').addClass('btn-warning').text('Şikayeti Güncelle');
      if($('#a').on('click', function() {  
        $('#complaintForm').off('submit').on('submit', function (event) {
        event.preventDefault();
        updateComplaint(id);
        });
        editButton.removeClass('btn-warning').addClass('btn-success');
      }));
    }

    
    document.addEventListener('DOMContentLoaded', function() {
    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); // Ocak 0'dan başladığı için +1 ekliyoruz.
    var yyyy = today.getFullYear();

    today = yyyy + '-' + mm + '-' + dd;

    document.getElementById('complaintDate').placeholder = today;
  });
  
 

  // Şikayeti güncelleme fonksiyonu
  function updateComplaint(id) {
    const updatedComplaint = {
      date: $('#complaintDate').val(),
      owner: $('#complaintOwner').val(),
      description: $('#complaintDescription').val(),
      status: 'İnceleniyor', // Güncellenen şikayetler varsayılan olarak inceleniyor durumunda
      company: $('#companySelect').val(),
    };

    // Güncellenen şikayeti tabloya ekle
    $(`#complaintTableBody tr[data-id="${id}"]`).html(`
      <td>${updatedComplaint.date}</td>
      <td>${updatedComplaint.owner}</td>
      <td>${updatedComplaint.description}</td>
      <td>${updatedComplaint.company}</td>
      <td>${updatedComplaint.status}</td>
      <td>
        <button type="button" class="btn btn-danger btn-sm" onclick="deleteComplaint(${id})">Sil</button>
        <button type="button" class="btn btn-warning btn-sm" onclick="editComplaint(${id})">Düzenle</button>
      </td>
    `);

    // Formu temizle
    $('#complaintDate').val('');
    $('#complaintOwner').val('');
    $('#complaintDescription').val('');
    $('#companySelect').val('');

    // Yeni şikayet ekleme moduna geri dön
    $('#complaintForm button[type="submit"]').text('Şikayet Gönder');
    $('#complaintForm').off('submit').on('submit', function (event) {
      event.preventDefault();
      addNewComplaint();
    });

    alert('Şikayet başarıyla güncellendi.');
  }

  // Yeni şikayet formunu dinle
  $('#complaintForm').submit(function (event) {
    event.preventDefault();
    addNewComplaint();
  });

  // Yeni şikayet ekleme fonksiyonu
  async function addNewComplaint() {
    const newComplaint = {
      id: complaints.length + 1,
      date: new Date().toISOString().split('T')[0],
      owner: $('#complaintOwner').val(),
      description: $('#complaintDescription').val(),
      status: 'İnceleniyor', // Yeni şikayetler varsayılan olarak inceleniyor durumunda
      company: $('#companySelect').val(),
    };
    
    // Yeni şikayeti tabloya ekle
    $('#complaintTableBody').append(`
      <tr data-id="${newComplaint.id}">
        <td>${newComplaint.date}</td>
        <td>${newComplaint.owner}</td>
        <td>${newComplaint.description}</td>
        <td>${newComplaint.company}</td>
        <td>${newComplaint.status}</td>
        <td>
          <button type="button" class="btn btn-danger btn-sm" onclick="deleteComplaint(${newComplaint.id})">Sil</button>
          <button type="button" class="btn btn-warning btn-sm" id="a" onclick="editComplaint(${newComplaint.id})">Düzenle</button>
        </td>
      </tr>
    `);

    // Formu temizle
    $('#complaintOwner').val('');
    $('#complaintDescription').val('');
    $('#companySelect').val('');

    alert('Şikayet başarıyla eklendi.');
  }
</script>

</body>
</html>
